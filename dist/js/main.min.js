/*
 Game 2016-10-02 
*/
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";window.Game=a("./src/js/Game"),Game.init().start()},{"./src/js/Game":6}],2:[function(a,b,c){"use strict";function d(a,b){var c=this;c.value=a,c.color=b}b.exports=d},{}],3:[function(a,b,c){"use strict";function d(){this.cards=[]}d.prototype={Card:a("./Card/Card"),generateFullColor:function(a){for(var b=[],c=2;c<15;c++)b.push(new this.Card(c,a));return b},generate:function(){var a=[].concat(this.generateFullColor("Spades"),this.generateFullColor("Hearts"),this.generateFullColor("Diams"),this.generateFullColor("Clubs"));return this.cards=a,a},shuffle:function(){for(var a,b,c=this.cards.length;0!==c;)b=Math.floor(Math.random()*c),c-=1,a=this.cards[c],this.cards[c]=this.cards[b],this.cards[b]=a},draw:function(a){var b=[];for(a||(a=1),this.cards.length<2&&this.raiseEvent("noCards"),a;a>0;a--)b.push(this.cards.shift());return b},events:{},addEventListener:function(a,b){a in this.events||(this.events[a]=[]),this.events[a].push(b)},raiseEvent:function(a,b){var c=this.events[a];if(c)for(var d=0;d<c.length;d++)"function"==typeof c[d]&&c[d](b)}},b.exports=d},{"./Card/Card":2}],4:[function(a,b,c){"use strict";function d(a,b){var c=this;c.human=b||!1,c.name=a,c.points=0,c.cards=[]}d.prototype={playCard:function(a){var b=this.cards[a];return this.cards.splice(a,1),[b]},drawCard:function(a){console.info(this.name+" draws a card."),this.cards=this.cards.concat(a)},events:{},addEventListener:function(a,b){a in this.events||(this.events[a]=[]),this.events[a].push(b)},raiseEvent:function(a,b){var c=this.events[a];if(c)for(var d=0;d<c.length;d++)"function"==typeof c[d]&&c[d](b)},findTheBestCard:function(a){var b=!1;return this.cards.forEach(function(c,d){c.value===a.value&&(b=d)}),b||this.cards.forEach(function(c,d){c.color===a.color&&(b=d)}),b}},b.exports=d},{}],5:[function(a,b,c){"use strict";function d(a,b){var c=this;c.Dock=a,c.Players=b,c.Dock.addEventListener("noCards",function(){var a=c.cards.pop(),b=c.cards;c.cards=[a],c.Dock.cards=c.Dock.cards.concat(b),c.Dock.shuffle(),c.raiseEvent("cardDrew")}),c.cards=[],c.activePlayer=1,c.turn=function(a){var b;a.human?(b=setTimeout(function(){a.drawCard(c.Dock.draw(1)),c.nextPlayer(),console.info("Next turn: "+c.Players[c.activePlayer].name)},15e3),clicked):b=setTimeout(function(){var b=a.findTheBestCard(c.cards[c.cards.length-1]);b===!1?(a.drawCard(c.Dock.draw(1)),c.raiseEvent("cardDrew")):c.playCard(a.playCard(b)),c.nextPlayer(),console.info("Next turn: "+c.Players[c.activePlayer].name)},500)},c.nextPlayer=function(){var a=c.Players.length-1;c.Players[c.activePlayer].cards.length>0?(c.activePlayer++,c.activePlayer>a&&(c.activePlayer=0),c.turn(b[c.activePlayer])):console.info(c.Players[c.activePlayer].name+" won.")}}d.prototype={distribute:function(a){var b=this;this.Players.forEach(function(c,d,e){c.drawCard(b.Dock.draw(a))})},playCard:function(a){var b=this;a.forEach(function(a){a.rotate=Math.floor(360*Math.random()+1),console.info(b.Players[b.activePlayer].name+" plays",a.value,a.color+".")}),this.cards=this.cards.concat(a),this.raiseEvent("cardPlayed")},events:{},addEventListener:function(a,b){a in this.events||(this.events[a]=[]),this.events[a].push(b)},raiseEvent:function(a,b){var c=this.events[a];if(c)for(var d=0;d<c.length;d++)"function"==typeof c[d]&&c[d](b)}},b.exports=d},{}],6:[function(a,b,c){"use strict";b.exports={PlayingTable:a("./PlayingTable/PlayingTable"),CardDock:a("./CardDock/CardDock"),Player:a("./Player/Player"),View:a("../View"),init:function(){return Game.View.stage.enableMouseOver(20),this},start:function(){console.info("Game Started.");var a=new this.CardDock;a.generate(),a.shuffle();var b=[new this.Player("Tom"),new this.Player("Andrew"),new this.Player("Bruce"),new this.Player("Matthew")],c=new this.PlayingTable(a,b);return c.distribute(5),c.playCard(c.Dock.draw(1)),this.View.renderers.init(c),c.nextPlayer(),c}}},{"../View":13,"./CardDock/CardDock":3,"./Player/Player":4,"./PlayingTable/PlayingTable":5}],7:[function(a,b,c){"use strict";function d(a){var b=Game.View.width-200,c=Game.View.height/2,d=new Game.View.templates.HiddenCardTemplate;d.regX=50,d.regY=75,d.x=b,d.y=c,d.addEventListener("click",function(){0===a.activePlayer&&(a.Players[0].drawCard(a.Dock.draw(1)),a.raiseEvent("cardDrew"))}),Game.View.stage.addChild(d)}b.exports=d},{}],8:[function(a,b,c){"use strict";function d(a){var b=Game.View.width/2,c=30*a.Players[0].cards.length/2;a.Players.forEach(function(a,b){if(0!==b){var c,d,e;switch(c=30*a.cards.length/2,b){case 1:e={x:0,y:30},d={x:0,y:Game.View.height/2-c};break;case 2:e={x:30,y:0},d={x:Game.View.width/2-c,y:0};break;case 3:e={x:0,y:30},d={x:Game.View.width,y:Game.View.height/2-c};break;default:throw"lol"}a.cards.forEach(function(){var a=new Game.View.templates.HiddenCardTemplate;a.x=d.x,a.y=d.y,a.regX=50,a.regY=75,1!==b&&3!==b||(a.rotation=90),Game.View.stage.addChild(a),d.x+=e.x,d.y+=e.y})}})}b.exports=d},{}],9:[function(a,b,c){"use strict";function d(a){var b=Game.View.width/2,c=30*a.Players[0].cards.length/2,d=b-c;a.Players[0].cards.forEach(function(b,c){var e=new Game.View.templates.CardTemplate(b);e.x=d,e.y=Game.View.height-160,e.addEventListener("mouseover",function(){e.y-=100,Game.View.stage.update()}),e.addEventListener("mouseout",function(){e.y+=100,Game.View.stage.update()}),e.addEventListener("click",function(){0===a.activePlayer&&a.playCard(a.Players[0].playCard(c))}),Game.View.stage.addChild(e),d+=30})}b.exports=d},{}],10:[function(a,b,c){"use strict";function d(a){var b=Game.View.width/2-50,c=Game.View.height/2;a.cards.forEach(function(a,d){var e=new Game.View.templates.CardTemplate(a);e.rotation=a.rotate,e.regX=50,e.regY=75,e.x=b,e.y=c,Game.View.stage.addChild(e)})}b.exports=d},{}],11:[function(a,b,c){"use strict";function d(a){var b=new createjs.Graphics;b.setStrokeStyle(1),b.beginStroke("#000000"),b.beginFill("#FFFFFF"),b.drawRect(0,0,100,150);var c=new createjs.Shape(b),d=Game.View.helpers.getCardValue(a.value),e="";e=["Spades","Clubs"].indexOf(a.color)===-1?"#FF0000":"#000000";var f=Game.View.helpers.decodeHtml("&"+a.color.toLowerCase()+";"),g=new createjs.Text(d,"20px Arial",e);g.x=5,g.y=5;var h=new createjs.Text(d,"20px Arial",e);h.x=95,h.y=125,h.textAlign="right";var i=new createjs.Text(f,"20px Arial",e);i.x=95,i.y=5,i.textAlign="right";var j=new createjs.Text(f,"20px Arial",e);j.x=5,j.y=125;var k=new createjs.Text(f,"50px Arial",e);k.x=50,k.y=50,k.textAlign="center";var l=new createjs.Container;return l.addChild(c,g,h,k,i,j),l}b.exports=d},{}],12:[function(a,b,c){"use strict";function d(){var a=new createjs.Graphics;a.setStrokeStyle(1),a.beginStroke("#000000"),a.beginFill("#333333"),a.drawRect(0,0,100,150);var b=new createjs.Shape(a),c="#000000",d=new createjs.Text("#","50px Arial",c);d.x=50,d.y=50,d.textAlign="center";var e=new createjs.Container;return e.addChild(b,d),e}b.exports=d},{}],13:[function(a,b,c){"use strict";b.exports=Object.create({stage:new createjs.Stage("game"),renderer:document.getElementById("game")|{},width:document.getElementById("game")&&document.getElementById("game").width?document.getElementById("game").width:800,height:document.getElementById("game")&&document.getElementById("game").height?document.getElementById("game").height:600,helpers:{getCardValue:function(a){switch(a){case 11:return"J";case 12:return"Q";case 13:return"K";case 14:return"A";default:return a}},decodeHtml:function(a){var b=document.createElement("textarea");return b.innerHTML=a,b.value}},templates:{CardTemplate:a("./Templates/CardTemplate"),HiddenCardTemplate:a("./Templates/HiddenCardTemplate")},renderers:{init:function(a){var b=this,c=function(){Game.View.stage.removeAllChildren(),b.TableRenderer(a),b.PlayersCardsRenderer(a),b.OpponentsCardsRenderer(a),b.DockRenderer(a),Game.View.stage.update()};a.addEventListener("cardPlayed",c),a.addEventListener("cardDrew",c),c()},PlayersCardsRenderer:a("./Renderers/PlayersCardsRenderer"),OpponentsCardsRenderer:a("./Renderers/OpponentsCardsRenderer"),TableRenderer:a("./Renderers/TableRenderer"),DockRenderer:a("./Renderers/DockRenderer")}})},{"./Renderers/DockRenderer":7,"./Renderers/OpponentsCardsRenderer":8,"./Renderers/PlayersCardsRenderer":9,"./Renderers/TableRenderer":10,"./Templates/CardTemplate":11,"./Templates/HiddenCardTemplate":12}]},{},[1]);